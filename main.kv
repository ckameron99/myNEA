<MenuScreen>:
    BoxLayout:
        size_hint: None, None
        size: min(root.width - 100, 200), 100
        pos_hint: {"center_x": 0.5, "center_y": 0.7}
        Button:
            text: 'Start'
            size_hint: 2,None
            on_press: root.startNByN()
        TextInput:
            text: '3'
            multiline: False
            on_text_validate: root.update(self.text,None)
        TextInput:
            text: '3'
            multiline: False
            on_text_validate: root.update(None,self.text)

    Button:
        size_hint: None,None
        size: 100,100
        pos_hint: {"center_x":0.25,"center_y":0.7}
        text: 'Quantum'
        on_press: root.startQuantum()

    Button:
        size_hint: None,None
        size: 100,100
        pos_hint: {"center_x":0.75,"center_y":0.7}
        text: 'Ultimate'
        on_press: root.startUltimate()

    Button:
        id: loginButton1
        size_hint: 0.2,0.1
        pos_hint: {"center_x": 0.13, "center_y": 0.9}
        text: 'Login'

    Button:
        id: loginButton2
        size_hint: 0.2,0.1
        pos_hint: {"center_x": 0.33, "center_y": 0.9}
        text: 'Login'

<LoginScreen>:
    BoxLayout:
        id: boxLayout
        orientation: 'vertical'
        size_hint: 0.3,0.7
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        Label:
            text: 'username: '
            text_size: self.size
            halign: 'left'
            valign: 'bottom'
        TextInput:
            id: box1
            text: ''
            multiline: False
            on_text_validate: root.updateUsername(self.text)
        Label:
            text: 'password: '
            text_size: self.size
            halign: 'left'
            valign: 'bottom'
        TextInput:
            id: box2
            text: ''
            multiline: False
            password: True
            on_text_validate: root.updatePassword(self.text)
        Label:
            id: messageBox
            text: ''
            text_size: self.size
            halign: 'center'
            valign: 'center'
            color: 1,0,0,1
        Button:
            text: 'Login'
            on_press: root.login()
        Button:
            text: 'Create new user'
            on_press:
                root.ids.box1.text=''
                root.ids.box2.text=''
                root.manager.transition.direction='down'
                root.ids.messageBox.text=''
                root.manager.current='createUser'
    Button:
        size_hint: 0.2,0.1
        pos_hint: {"center_x": 0.13, "center_y": 0.9}
        text: 'Back to menu'
        on_press:
            root.manager.transition.direction='up'
            root.ids.messageBox.text=''
            root.manager.current = 'menu'

<CreateUserScreen>:
    BoxLayout:
        id: boxLayout
        orientation: 'vertical'
        size_hint: 0.3,0.7
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        Label:
            text: 'username: '
            text_size: self.size
            halign: 'left'
            valign: 'bottom'
        TextInput:
            id: box1
            text: ''
            multiline: False
            on_text_validate: root.updateUsername(self.text)

        Label:
            text: 'forename: '
            text_size: self.size
            halign: 'left'
            valign: 'bottom'
        TextInput:
            id: box2
            text: ''
            multiline: False
            on_text_validate: root.updateForename(self.text)

        Label:
            text: 'surname: '
            text_size: self.size
            halign: 'left'
            valign: 'bottom'
        TextInput:
            id: box3
            text: ''
            multiline: False
            on_text_validate: root.updateSurname(self.text)

        Label:
            text: 'password: '
            text_size: self.size
            halign: 'left'
            valign: 'bottom'
        TextInput:
            id: box5
            text: ''
            multiline: False
            password: True
            on_text_validate: root.updatePassword(self.text)

        Label:
            text: 'confirm password: '
            text_size: self.size
            halign: 'left'
            valign: 'bottom'
        TextInput:
            id: box6
            text: ''
            multiline: False
            password: True
            on_text_validate: root.confirmPassword(self.text)

        Label:
            id: messageBox
            text: ''
            text_size: self.size
            halign: 'center'
            valign: 'center'
            color: 1,0,0,1
        Button:
            text: 'Create new user'
            on_press: root.createNewUser()
    Button:
        size_hint: 0.2,0.1
        pos_hint: {"center_x": 0.13, "center_y": 0.9}
        text: 'Back to menu'
        on_press:
            root.ids.box1.text=''
            root.ids.box2.text=''
            root.ids.box3.text=''
            root.ids.box5.text=''
            root.ids.box6.text=''
            root.manager.transition.direction='up'
            root.ids.messageBox.text=''
            root.manager.current = 'menu'


<CustomDropDown>:
    refresh: dropdown.__self__
    size_hint:None,None
    height: '48dp'
    width: '300dp'
    pos_hint: {"center_x":0.5,"center_y":0.5}
    Button:
        id: mainbutton
        text: 'Choose AI'
        on_release: dropdown.open(self)
    DropDown:
        id: dropdown
        on_select: mainbutton.text = '{}'.format(args[1])
        Button:
            size_hint_y: None
            height:44
            text: 'Two Player'
            on_release: dropdown.select('None')
        Button:
            size_hint_y: None
            height:44
            text: 'Naive Minimax'
            on_release: dropdown.select('NaiveMinimax')
        Button:
            size_hint_y: None
            height:44
            text: 'Minimax'
            on_release: dropdown.select('Minimax')
        Button:
            size_hint_y: None
            height:44
            text: 'Naive Minimax with Alpha Beta Pruning'
            on_release: dropdown.select('NABPMM')
        Button:
            size_hint_y: None
            height:44
            text: 'Minimax with Alpha Beta Pruning'
            on_release: dropdown.select('ABPMM')


<NByN>:
    grid: Grid
    GridLayout:
        id: Grid
        size_hint: None,None
        size: max(min(root.width,root.height)/3*2,200),max(min(root.width,root.height)/3*2,200)
        pos_hint: {"center_x":0.5, "center_y":0.5}
        cols: root.w

    BoxLayout:
        size_hint: None,None
        size: 300,50
        #pos_hint: {"x":0.03,"top":0.97}
        x: max(10,root.width/100*3)
        top: root.height- max(10,root.height/100*3)
        Button:
            text: 'Back to menu'
            on_press:
                root.manager.transition.direction='right'
                root.manager.current = 'menu'
                root.manager.remove_widget(root)
        Button:
            text: 'Load'
            on_release: root.loadFileGUI()
        Button:
            text: 'Save'
            on_release: root.saveFileGUI()

<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: "./savedGames"
            on_submit: root.load(filechooser.path, filechooser.selection)

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)

<SaveDialog>:
    text_input: text_input
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: "savedGames/"
            on_selection: text_input.text = (self.selection and self.selection[0] or '').replace("/savedGames/savedGames/","/savedGames/")
            on_submit: root.save(filechooser.path,text_input.text)

        TextInput:
            id: text_input
            size_hint_y: None
            height: 30
            multiline: False

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Save"
                on_release: root.save(filechooser.path, text_input.text)
